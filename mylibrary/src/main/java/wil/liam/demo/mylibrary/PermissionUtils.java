package wil.liam.demo.mylibrary;import android.app.Activity;import android.content.Context;import android.content.Intent;import android.content.pm.PackageManager;import android.net.Uri;import android.os.Build;import android.support.v4.app.ActivityCompat;import java.util.ArrayList;import java.util.List;public class PermissionUtils {    public static final int PERMISSION_CODE_TELEPHONE = 500;    public static final int PERMISSION_CODE_CLASS_AUTO = 999;    public static final int PERMISSION_CODE_CLASS_CHECK = 1000;    private static final String TAG = "PermissionUtils";    public static boolean checkPermission(Activity activity, String permission){        if (ActivityCompat.checkSelfPermission(activity, permission) == PackageManager.PERMISSION_GRANTED)            return true;        return false;    }    public static String[] checkPermissions(Activity activity, String[] permissions){        List<String> noPermissions = new ArrayList<>();        for (String permission : permissions){            if (!checkPermission(activity,permission))                noPermissions.add(permission);        }        return noPermissions.toArray(new String[]{});    }    public static boolean shouldShowRequestPermissionRationale(Activity activity, String permission){        return  ActivityCompat.shouldShowRequestPermissionRationale(activity,permission);    }    public static ShowResult[] shouldShowRequestPermissionRationale(Activity activity, String[] permissions){        if (permissions == null || permissions.length == 0)            return null ;        List<ShowResult> showResultList = new ArrayList<>();        for (String permission : permissions)            showResultList.add(new ShowResult(permission,shouldShowRequestPermissionRationale(activity,permission)));        return showResultList.toArray(new ShowResult[]{});    }    public static void requestPermission(Activity activity, String permission, int requestCode){        String [] permissions = {permission};        ActivityCompat.requestPermissions(activity,permissions,requestCode);    }    public static void requestPermissions(Activity activity, String[] permissions, int requestCode){        if (permissions == null || permissions.length == 0)            return;        ActivityCompat.requestPermissions(activity,permissions,requestCode);    }    public static void toAppSetting(Context context){        Intent intent = new Intent();        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);        if (Build.VERSION.SDK_INT >= 9){            intent.setAction("android.settings.APPLICATION_DETAILS_SETTINGS");            intent.setData(Uri.fromParts("package",context.getPackageName(),null));        }else {            intent.setAction(Intent.ACTION_VIEW);            intent.setClassName("com.android.settings","com.android.settings.InstalledAppDetails");            intent.putExtra("com.android.settings.ApplicationPkgName",context.getPackageName());        }        context.startActivity(intent);    }    public static class ShowResult{        String permission;        boolean show;        public ShowResult(String permission, boolean show){            this.permission = permission;            this.show = show;        }        public String getPermission() {            return permission;        }        public boolean isShow() {            return show;        }    }}